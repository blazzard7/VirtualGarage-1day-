Отчет по проекту: Virtual Garage API
1. Введение

Данный отчет описывает разработку API “Virtual Garage”, предназначенного для управления информацией об автомобилях. API использует Node.js, Express, Sequelize (ORM) и SQLite для хранения данных. Валидация данных осуществляется с помощью express-validator.

2. Цель проекта

Разработка RESTful API для CRUD-операций (Create, Read, Update, Delete) над сущностью “Автомобиль” (Car). API должен обеспечивать валидацию входных данных и хранить информацию в базе данных.

3. Задачи проекта

3.1. Настройка базы данных и определение модели данных.
3.2. Реализация API-эндпоинтов для CRUD-операций.
3.3. Реализация валидации входных данных.
3.4. Обработка ошибок и возврат соответствующих HTTP-кодов.
3.5. Инициализация и заполнение БД данными.
4. Реализация проекта

4.1. Настройка базы данных и определение модели данных

Технологии: Sequelize (ORM), SQLite.
Описание: Использован Sequelize для абстрагирования взаимодействия с базой данных SQLite. Определена модель Car с полями: car_id (UUID, primary key), user_id (string, not null), make (string, not null), model (string, not null), year (integer, not null), vin (string, nullable), mileage (integer, nullable), last_service_date (date, nullable).
Валидация: Валидация полей настроена как на уровне модели Sequelize (например, isInt, min, max), так и с помощью express-validator (для запросов).
4.2. Реализация API-эндпоинтов для CRUD-операций

Технологии: Express.js, Node.js.
Описание: Разработаны следующие эндпоинты:
GET /cars: Получение списка всех автомобилей.
GET /cars/:car_id: Получение автомобиля по ID.
POST /cars: Создание нового автомобиля.
PUT /cars/:car_id: Обновление существующего автомобиля по ID.
DELETE /cars/:car_id: Удаление автомобиля по ID.
4.3. Реализация валидации входных данных

Технологии: express-validator.
Описание: Использован express-validator для валидации данных, передаваемых в запросах POST и PUT. Настроены правила для проверки типов данных, обязательности полей, минимальных и максимальных значений, а также для проверки формата VIN и даты.
Примеры правил:
body('user_id').notEmpty().withMessage('ID является обязательным полем')
body('year').isInt({ min: 1900, max: new Date().getFullYear() + 1 }).withMessage('Невалидный год')
body('vin').optional().isAlphanumeric().isLength({ min: 17, max: 17 }).withMessage('VIN может быть только из 17 символов')
4.4. Обработка ошибок и возврат соответствующих HTTP-кодов

Описание: В случае возникновения ошибок (например, невалидные данные, автомобиль не найден, ошибка базы данных) API возвращает соответствующие HTTP-коды ошибок (400, 404, 500) и информативные сообщения об ошибках.
4.5. Инициализация и заполнение БД данными

Внедрен асинхронный блок кода для инициализации базы данных. Блок проверяет, есть ли записи в таблице, и если нет, то добавляет запись.
5. Использованные технологии

Node.js
Express.js
Sequelize (ORM)
SQLite
express-validator
6. Тестирование

API тестировался с использованием Postman. Проверена работа всех эндпоинтов, валидация данных и обработка ошибок.

7. Выводы

В результате разработки был создан RESTful API для управления автомобилями с использованием современных технологий и лучших практик. API обеспечивает валидацию данных, корректную обработку ошибок и хранение информации в базе данных.

8. Дальнейшее развитие

Реализация аутентификации и авторизации.
Добавление поддержки других баз данных.
Улучшение документации API.
Добавление возможности поиска и фильтрации автомобилей.
